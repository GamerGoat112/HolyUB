{"version":3,"file":"bootstrapper.js","mappings":"CAAA,SAA2CA,EAAMC,GAC1B,iBAAZC,SAA0C,iBAAXC,OACxCA,OAAOD,QAAUD,IACQ,mBAAXG,QAAyBA,OAAOC,IAC9CD,OAAO,GAAIH,GACe,iBAAZC,QACdA,QAAkB,SAAID,IAEtBD,EAAe,SAAIC,IARrB,CASGK,MAAM,WACT,O,wBCTA,IAAIC,EAAsB,CCA1BA,EAAwB,SAASL,EAASM,GACzC,IAAI,IAAIC,KAAOD,EACXD,EAAoBG,EAAEF,EAAYC,KAASF,EAAoBG,EAAER,EAASO,IAC5EE,OAAOC,eAAeV,EAASO,EAAK,CAAEI,YAAY,EAAMC,IAAKN,EAAWC,MCJ3EF,EAAwB,SAASQ,EAAKC,GAAQ,OAAOL,OAAOM,UAAUC,eAAeC,KAAKJ,EAAKC,K,2CCA/F,MAAMI,EAAa,KACbC,EAAkB,eCGT,MAAMC,EACpBC,qBDFc,MACdC,YAAYC,GACXC,KAAKD,SAAWE,OAAOF,GAExBG,MAAMC,GAGL,OAFAA,EAAQF,OAAOE,IAENC,MAAMT,GACPQ,EACCA,EAAME,SAAS,OAASF,EAAMC,MAAMV,GACrC,UAAUS,IAEVH,KAAKD,SAASO,QAAQ,KAAMC,mBAAmBJ,MCRxDN,iBCNwB,EDOxBA,mBCR0B,EDS1BA,iBETwB,EFUxBA,iBETwB,EFUxBA,gBETuB,EFUvBA,gBETuB,EFUvBA,iBETwB,EFUxBA,kBETyB,EFUzBC,YAAYU,GACX,GAA+B,iBAArBA,EAAOC,UAChB,MAAM,IAAIC,UAAU,8BAGrBV,KAAKQ,OAASA,EAEdR,KAAKW,MAAQX,KAAKY,WAEnBC,iBACC,KAAK,kBAAmBC,WAAW,MAAM,IAAIC,MAAM,kDAMnD,MAAMC,EAAM,GAAGhB,KAAKQ,OAAOC,6BAA6BF,mBAAmBU,KAAKC,UAAUlB,KAAKQ,WAE/FR,KAAKmB,aAAeL,UAAUM,cAAcR,SAASI,EAAK,CACzDK,MAAOrB,KAAKQ,OAAOC,UACnBa,eAAgB,eAGXtB,KAAKmB,OAAOI,SAEfvB,KAAKQ,OAAOgB,UEvCQ,GFwCtBC,QAAQC,MAAM,kCAGhB,GAAMC,EAASX,GACd,MAAO,GAAGhB,KAAKQ,OAAOC,oBAAoBF,mBAAmBoB,MAAYpB,mBAAmBS,KAE7FY,KAAKZ,GACJ,OAAOhB,MAAK,EAAM,OAAQgB,GAE3Ba,IAAIb,GACH,OAAOhB,MAAK,EAAM,MAAOgB,GAE1Bc,GAAGd,GACF,OAAOhB,MAAK,EAAM,KAAMgB,GAEzBe,OAAOf,GACN,OAAOhB,MAAK,EAAM,SAAUgB,I","sources":["webpack://TOMPBoot/webpack/universalModuleDefinition","webpack://TOMPBoot/webpack/bootstrap","webpack://TOMPBoot/webpack/runtime/define property getters","webpack://TOMPBoot/webpack/runtime/hasOwnProperty shorthand","webpack://TOMPBoot/./Bootstrapper/SearchBuilder.js","webpack://TOMPBoot/./Bootstrapper/Bootstrapper.js","webpack://TOMPBoot/./TOMPConstants.js","webpack://TOMPBoot/./LoggerConstants.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"TOMPBoot\"] = factory();\n\telse\n\t\troot[\"TOMPBoot\"] = factory();\n})(self, function() {\nreturn ","// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","const whitespace = /\\s/;\nconst http_s_protocol = /^https?:\\/\\//;\n\nexport default class SearchBuilder {\n\tconstructor(template){\n\t\tthis.template = String(template);\n\t}\n\tquery(input){\n\t\tinput = String(input);\n\n\t\tif(input.match(http_s_protocol)){\n\t\t\treturn input;\n\t\t}else if(input.includes('.') && !input.match(whitespace)){\n\t\t\treturn `http://${input}`;\n\t\t}else{\n\t\t\treturn this.template.replace('%s', encodeURIComponent(input));\n\t\t}\n\t}\n};","import SearchBuilder from './SearchBuilder.js';\nimport { LOG_TRACE, LOG_DEBUG, LOG_INFO, LOG_WARN, LOG_ERROR, LOG_SILENT } from '../LoggerConstants.js';\nimport { CODEC_PLAIN, CODEC_XOR } from '../TOMPConstants.js';\n\nexport default class Bootstrapper {\n\tstatic SearchBuilder = SearchBuilder;\n\t// expose constants\n\tstatic CODEC_XOR = CODEC_XOR;\n\tstatic CODEC_PLAIN = CODEC_PLAIN;\n\tstatic LOG_TRACE = LOG_TRACE;\n\tstatic LOG_DEBUG = LOG_DEBUG;\n\tstatic LOG_INFO = LOG_INFO;\n\tstatic LOG_WARN = LOG_WARN;\n\tstatic LOG_ERROR = LOG_ERROR;\n\tstatic LOG_SILENT = LOG_SILENT;\n\tconstructor(config){\n\t\tif(typeof config.directory !== 'string'){\n\t\t\tthrow new TypeError(`Directory must be a string`);\n\t\t}\n\n\t\tthis.config = config;\n\n\t\tthis.ready = this.register();\n\t}\n\tasync register(){\n\t\tif(!('serviceWorker' in navigator))throw new Error('Your browser does not support service workers.' );\n\t\t\n\t\t/*for(let worker of await navigator.serviceWorker.getRegistrations()){\n\t\t\tawait worker.unregister();\n\t\t}*/\n\n\t\tconst url = `${this.config.directory}worker.js?config=${encodeURIComponent(JSON.stringify(this.config))}`;\n\n\t\tthis.worker = await navigator.serviceWorker.register(url, {\n\t\t\tscope: this.config.directory,\n\t\t\tupdateViaCache: 'none',\n\t\t});\n\t\t\n\t\tawait this.worker.update();\n\n\t\tif(this.config.loglevel <= LOG_DEBUG){\n\t\t\tconsole.debug('Registered the service worker.');\n\t\t}\n\t}\n\t#send(service, url){\n\t\treturn `${this.config.directory}process:${encodeURIComponent(service)}:${encodeURIComponent(url)}`;\n\t}\n\thtml(url){\n\t\treturn this.#send('html', url);\n\t}\n\tcss(url){\n\t\treturn this.#send('css', url);\n\t}\n\tjs(url){\n\t\treturn this.#send('js', url);\n\t}\n\tbinary(url){\n\t\treturn this.#send('binary', url);\n\t}\n};","export const CODEC_PLAIN = 0;\nexport const CODEC_XOR = 1;","export const LOG_TRACE = 0;\nexport const LOG_DEBUG = 1;\nexport const LOG_INFO = 2;\nexport const LOG_WARN = 3;\nexport const LOG_ERROR = 4;\nexport const LOG_SILENT = 5;"],"names":["root","factory","exports","module","define","amd","self","__webpack_require__","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","whitespace","http_s_protocol","Bootstrapper","static","constructor","template","this","String","query","input","match","includes","replace","encodeURIComponent","config","directory","TypeError","ready","register","async","navigator","Error","url","JSON","stringify","worker","serviceWorker","scope","updateViaCache","update","loglevel","console","debug","service","html","css","js","binary"],"sourceRoot":""}